<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Soil Yield Surface Visualizer</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="src/css/styles.css">
    
    <!-- External Libraries -->
    <script src="https://cdn.plot.ly/plotly-2.20.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
      <!-- Application Scripts -->
    <script src="src/js/config.js"></script>
    <script src="src/js/utils.js"></script>
    <script src="src/js/math-renderer.js"></script>
    <script src="src/js/mohr-coulomb-model.js"></script>
    <script src="src/js/drucker-prager-model.js"></script>
    <script src="src/js/plot-manager.js"></script>
    <script src="src/js/app.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Advanced Soil Yield Surface Visualizer</h1>
            <p>Interactive 3D and 2D visualizations of soil constitutive models for geotechnical engineering</p>
        </header>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Control Panel -->
            <aside class="control-panel">
                <!-- Model Selection -->
                <section class="model-selection">
                    <h2>Select Soil Model</h2>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="modelMohrCoulomb" name="soilModel" value="MohrCoulomb" checked>
                            <label for="modelMohrCoulomb">Mohr-Coulomb</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="modelDruckerPrager" name="soilModel" value="DruckerPrager">
                            <label for="modelDruckerPrager">Drucker-Prager</label>
                        </div>
                    </div>
                </section>

                <!-- Mohr-Coulomb Parameters -->
                <section id="mohrCoulombControls" class="parameter-section">
                    <h2>Mohr-Coulomb Parameters</h2>
                    
                    <div class="parameter-group">
                        <label for="cohesion" class="parameter-label">
                            Cohesion (c): <span id="cohesionValue" class="parameter-value">10</span> kPa
                        </label>
                        <input type="range" id="cohesion" class="slider" min="0" max="100" value="10" step="1">
                    </div>

                    <div class="parameter-group">
                        <label for="frictionAngle" class="parameter-label">
                            Friction Angle (φ): <span id="frictionAngleValue" class="parameter-value">30</span>°
                        </label>
                        <input type="range" id="frictionAngle" class="slider" min="0" max="45" value="30" step="1">
                    </div>
                </section>

                <!-- Drucker-Prager Parameters -->
                <section id="druckerPragerControls" class="parameter-section hidden">
                    <h2>Drucker-Prager Parameters</h2>
                    
                    <div class="parameter-group">
                        <label for="dpM" class="parameter-label">
                            Slope (m): <span id="dpMSpan" class="parameter-value">0.5</span>
                        </label>
                        <input type="range" id="dpM" class="slider" min="0.0" max="2.0" value="0.5" step="0.01">
                    </div>

                    <div class="parameter-group">
                        <label for="dpKd" class="parameter-label">
                            Cohesion Intercept (k<sub>d</sub>): <span id="dpKdSpan" class="parameter-value">10</span> kPa
                        </label>
                        <input type="range" id="dpKd" class="slider" min="0" max="50" value="10" step="1">
                    </div>
                </section>

                <!-- Mathematical Equations -->
                <section class="math-section">
                    <div id="mathEquations">
                        <!-- Math content will be populated by JavaScript -->
                    </div>
                </section>
            </aside>

            <!-- 3D Visualization -->
            <main class="plot-container">
                <h3 class="plot-title">3D Principal Stress Space (σ₁, σ₂, σ₃)</h3>
                <div id="plot3DContainer" class="plot-3d-container"></div>
                <p class="plot-description">
                    Interactive 3D visualization showing the complete yield surface in principal stress space.
                    Use mouse to rotate, zoom, and pan the view.
                </p>
            </main>
        </div>

        <!-- 2D Projections -->
        <div class="plots-grid">
            <!-- Pi-Plane Projection -->
            <div class="plot-container">
                <h3 class="plot-title">π-Plane Projection</h3>
                <div id="piPlaneContainer" class="plot-2d-container">
                    <canvas id="piPlaneChart"></canvas>
                </div>
                <p class="plot-description">
                    Cross-sectional view of the yield surface in the deviatoric plane, 
                    looking down the hydrostatic axis (σ₁=σ₂=σ₃).
                </p>
            </div>

            <!-- Meridian Plane Projection -->
            <div class="plot-container">
                <h3 class="plot-title">Meridian Plane (p-q)</h3>
                <div id="meridianPlaneContainer" class="plot-2d-container">
                    <canvas id="meridianPlaneChart"></canvas>
                </div>
                <p class="plot-description">
                    Relationship between mean stress (p) and deviatoric stress (q).
                    Shows triaxial compression and extension paths for Mohr-Coulomb.
                </p>
            </div>
        </div>

        <!-- Additional Information -->
        <section class="plot-container" style="margin-top: 1.5rem;">
            <h3 class="plot-title">Model Information & Usage Guide</h3>
            <div style="padding: 1rem;">
                <div class="equation-box">
                    <h4 class="equation-title">How to Use This Tool</h4>
                    <ul style="margin: 0; padding-left: 1.5rem; line-height: 1.6;">
                        <li><strong>Model Selection:</strong> Choose between Mohr-Coulomb and Drucker-Prager models using the radio buttons</li>
                        <li><strong>Parameter Adjustment:</strong> Use the sliders to modify model parameters and see real-time updates</li>
                        <li><strong>3D Interaction:</strong> Rotate, zoom, and pan the 3D plot using your mouse or touch gestures</li>
                        <li><strong>2D Analysis:</strong> Study specific cross-sections in the π-plane and meridian plane projections</li>
                    </ul>
                </div>
                
                <div class="equation-box">
                    <h4 class="equation-title">Stress Conventions</h4>
                    <p style="margin: 0; line-height: 1.6;">
                        This visualization uses the compression-positive sign convention common in geotechnical engineering.
                        Stress values are in kilopascals (kPa). The coordinate system assumes σ₁ ≥ σ₂ ≥ σ₃ for principal stresses.
                    </p>
                </div>

                <div class="equation-box">
                    <h4 class="equation-title">Applications</h4>
                    <p style="margin: 0; line-height: 1.6;">
                        These yield surfaces are fundamental in understanding soil behavior under different loading conditions.
                        They help engineers predict failure conditions, design foundations, and analyze slope stability.
                        The visualization aids in educational purposes and research in geotechnical engineering.
                    </p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 Advanced Soil Yield Surface Visualizer. Created for educational and research purposes in geotechnical engineering.</p>
        </footer>
    </div>

    <!-- Loading indicator (hidden by default) -->
    <div id="loadingIndicator" class="loading" style="display: none;"></div>
</body>
</html>
